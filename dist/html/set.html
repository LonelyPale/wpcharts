<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>设置</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="/wpcharts/lib/layui-v2.5.5/layui/css/layui.css" media="all">
    <link rel="stylesheet" href="/wpcharts/lib/pickr-1.5.1/dist/themes/classic.min.css" media="all">
</head>

<body>

<form class="layui-form" action="" lay-filter="set-form">

    <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
        <legend>线条颜色设置</legend>
    </fieldset>

    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label">线条1</label>
            <div class="layui-input-inline">
                <input type="text" name="line-color-1" readonly required lay-verify="required" placeholder="请选择颜色" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-inline">
            <div class="line-pickr-1"></div>
        </div>

        <div class="layui-inline">
            <label class="layui-form-label">线条7</label>
            <div class="layui-input-inline">
                <input type="text" name="line-color-7" readonly required lay-verify="required" placeholder="请选择颜色" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-inline">
            <div class="line-pickr-7"></div>
        </div>
    </div>

    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label">线条2</label>
            <div class="layui-input-inline">
                <input type="text" name="line-color-2" readonly required lay-verify="required" placeholder="请选择颜色" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-inline">
            <div class="line-pickr-2"></div>
        </div>

        <div class="layui-inline">
            <label class="layui-form-label">线条8</label>
            <div class="layui-input-inline">
                <input type="text" name="line-color-8" readonly required lay-verify="required" placeholder="请选择颜色" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-inline">
            <div class="line-pickr-8"></div>
        </div>
    </div>

    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label">线条3</label>
            <div class="layui-input-inline">
                <input type="text" name="line-color-3" readonly required lay-verify="required" placeholder="请选择颜色" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-inline">
            <div class="line-pickr-3"></div>
        </div>

        <div class="layui-inline">
            <label class="layui-form-label">线条9</label>
            <div class="layui-input-inline">
                <input type="text" name="line-color-9" readonly required lay-verify="required" placeholder="请选择颜色" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-inline">
            <div class="line-pickr-9"></div>
        </div>
    </div>

    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label">线条4</label>
            <div class="layui-input-inline">
                <input type="text" name="line-color-4" readonly required lay-verify="required" placeholder="请选择颜色" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-inline">
            <div class="line-pickr-4"></div>
        </div>

        <div class="layui-inline">
            <label class="layui-form-label">线条10</label>
            <div class="layui-input-inline">
                <input type="text" name="line-color-10" readonly required lay-verify="required" placeholder="请选择颜色" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-inline">
            <div class="line-pickr-10"></div>
        </div>
    </div>

    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label">线条5</label>
            <div class="layui-input-inline">
                <input type="text" name="line-color-5" readonly required lay-verify="required" placeholder="请选择颜色" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-inline">
            <div class="line-pickr-5"></div>
        </div>

        <div class="layui-inline">
            <label class="layui-form-label">线条11</label>
            <div class="layui-input-inline">
                <input type="text" name="line-color-11" readonly required lay-verify="required" placeholder="请选择颜色" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-inline">
            <div class="line-pickr-11"></div>
        </div>
    </div>

    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label">线条6</label>
            <div class="layui-input-inline">
                <input type="text" name="line-color-6" readonly required lay-verify="required" placeholder="请选择颜色" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-inline">
            <div class="line-pickr-6"></div>
        </div>

        <div class="layui-inline">
            <label class="layui-form-label">线条12</label>
            <div class="layui-input-inline">
                <input type="text" name="line-color-12" readonly required lay-verify="required" placeholder="请选择颜色" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-inline">
            <div class="line-pickr-12"></div>
        </div>
    </div>

    <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
        <legend>轴设置</legend>
    </fieldset>

    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label">间隔数量</label>
            <div class="layui-input-inline">
                <input type="text" name="line-color-ticks" required lay-verify="required|number" placeholder="4 - 8" autocomplete="off" class="layui-input">
            </div>
        </div>
    </div>

    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label">最小刻度</label>
            <div class="layui-input-inline">
                <input type="text" name="line-color-min" required lay-verify="required|number" placeholder="最小值" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label">最大刻度</label>
            <div class="layui-input-inline">
                <input type="text" name="line-color-max" required lay-verify="required|number" placeholder="最大值" autocomplete="off" class="layui-input">
            </div>
        </div>
    </div>

    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label">分组选择框</label>
            <div class="layui-input-inline" id="test">
                <select name="line" id="line">
                    <option value="1">11</option>
                    <option value="2">22</option>
                    <option value="3">33</option>
                    <option value="4">44</option>
                </select>
            </div>
        </div>
    </div>

    <div class="layui-form-item">
        <div class="layui-input-block">
            <button class="layui-btn" lay-submit lay-filter="formSubmit">立即提交</button>
            <button type="reset" class="layui-btn layui-btn-primary">重置</button>
        </div>
    </div>
</form>
</body>

<script src="/wpcharts/lib/layui-v2.5.5/layui/layui.js" charset="utf-8"></script>
<script src="/wpcharts/lib/pickr-1.5.1/dist/pickr.es5.min.js" charset="utf-8"></script>
<script src="/wpcharts/lib/jquery.min.js" charset="utf-8"></script>
<script src="/wpcharts/dist/js/util.js" charset="utf-8"></script>
<script>
    layui.use('form', function(){
        let form = layui.form;

        form.on('submit(formSubmit)', function(data){
            console.log(111, data);
            layer.msg(JSON.stringify(data.field));
            return false;
        });

        let wpcharts = parent.wpcharts;
        let id = getUrlParameter('id');
        let instance = wpcharts.getInstance(id); //wpcharts.instance
        console.log(11, id, instance);
        instance.set('qqq');

        const themes = [
            [
                'classic',
                {
                    swatches: [
                        'rgba(244, 67, 54, 1)',
                        'rgba(233, 30, 99, 0.95)',
                        'rgba(156, 39, 176, 0.9)',
                        'rgba(103, 58, 183, 0.85)',
                        'rgba(63, 81, 181, 0.8)',
                        'rgba(33, 150, 243, 0.75)',
                        'rgba(3, 169, 244, 0.7)',
                        'rgba(0, 188, 212, 0.7)',
                        'rgba(0, 150, 136, 0.75)',
                        'rgba(76, 175, 80, 0.8)',
                        'rgba(139, 195, 74, 0.85)',
                        'rgba(205, 220, 57, 0.9)',
                        'rgba(255, 235, 59, 0.95)',
                        'rgba(255, 193, 7, 1)'
                    ],

                    components: {
                        preview: true,
                        opacity: true,
                        hue: true,

                        interaction: {
                            hex: true,
                            rgba: true,
                            hsva: true,
                            input: true,
                            clear: true,
                            save: true
                        }
                    }
                }
            ],
            [
                'monolith',
                {
                    swatches: [
                        'rgba(244, 67, 54, 1)',
                        'rgba(233, 30, 99, 0.95)',
                        'rgba(156, 39, 176, 0.9)',
                        'rgba(103, 58, 183, 0.85)',
                        'rgba(63, 81, 181, 0.8)',
                        'rgba(33, 150, 243, 0.75)',
                        'rgba(3, 169, 244, 0.7)'
                    ],

                    defaultRepresentation: 'HEXA',
                    components: {
                        preview: true,
                        opacity: true,
                        hue: true,

                        interaction: {
                            hex: false,
                            rgba: false,
                            hsva: false,
                            input: true,
                            clear: true,
                            save: true
                        }
                    }
                }
            ],
            [
                'nano',
                {
                    swatches: [
                        'rgba(244, 67, 54, 1)',
                        'rgba(233, 30, 99, 0.95)',
                        'rgba(156, 39, 176, 0.9)',
                        'rgba(103, 58, 183, 0.85)',
                        'rgba(63, 81, 181, 0.8)',
                        'rgba(33, 150, 243, 0.75)',
                        'rgba(3, 169, 244, 0.7)'
                    ],

                    defaultRepresentation: 'HEXA',
                    components: {
                        preview: true,
                        opacity: true,
                        hue: true,

                        interaction: {
                            hex: false,
                            rgba: false,
                            hsva: false,
                            input: true,
                            clear: true,
                            save: true
                        }
                    }
                }
            ]
        ];
        const [theme, config] = themes[0];
        for (let i = 1; i <= 12; i++) {
            const el = document.createElement('p');
            const pickrContainer = document.querySelector(`.line-pickr-${i}`).appendChild(el);
            let pickr = new Pickr(Object.assign({
                el, theme,
                default: '#42445a'
            }, config));
            pickr.on('save', (color, instance) => {
                let colorHex = color.toHEXA().toString();
                let key = `line-color-${i}`;
                form.val('set-form', {[key]: colorHex});
                instance.hide();
            }).on('clear', instance => {
                console.log('clear', instance);
            });
        }

        $('#test').find('dd').each(function (index, element) {
            console.log(arguments, index, element);
            $(element).html('<img width="188" height="36" src="/wpcharts/dist/test.svg" />');
        });
    });
</script>

</html>
